---
title: "Pipeline with Toy Data"
output: html_document
date: '2022-09-28'
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Toy Datasets

- Cluster template: 
    - K=5 clusters
    - Stratified sample of 1000 graphs from 10 London Letters
- Model training documents:
    - 10


## Fit Amy's Full Hierarchical Model
```{r}
md <- format_model_data(proc_list=example_model_proc_list, 
                        writer_indices=c(2,5), 
                        doc_indices=c(7,18), 
                        a=2, b=0.25, c=2, d=2, e=0.5)
draws <- fit_model(md, num_iters = 4000)
draws <- drop_burnin(draws, 1000)
```

## Analyze Questioned Documents
```{r}
# questioned documents ----
qd <- format_questioned_data(proc_list = example_questioned_proc_list,
                             writer_indices=c(2,5), 
                             doc_indices=c(7,18))
analysis <- analyze_questioned_documents(md, draws, qd, num_cores = 4)

plot_posterior_probabilities(analysis)
```

