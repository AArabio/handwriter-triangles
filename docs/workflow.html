<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="Homepage for the handwriter R package." />
        <meta name="author" content="Julia Lundstrum" />
        <meta name="datePublished" content = "July 30, 2021" />
        <title>Handwriter</title>
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/styles.css" rel="stylesheet" />
        <link rel="icon" href="https://forensicstats.org/wp-content/uploads/2017/01/favicon-32x32.png" sizes="32x32">
        <link href="https://fonts.googleapis.com/css?family=Montserrat:100,200,300,400" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Indie+Flower" rel="stylesheet">
    </head>
    <body>
        <div class="d-flex" id="wrapper">
            <!-- Page content wrapper-->
            <div id="page-content-wrapper">
                <!-- Top navigation-->
                <nav class="navbar navbar-expand-lg navbar-light bg-navy border-bottom">
                    <div class="container-fluid">
                        <a href = "https://forensicstats.org/" target="_blank">
                          <img src = "Pictures/csafe-logo-90.png" class = "img-fluid">
                        </a>
                      <div class="title-text-center">
                        <h1 style ="font-size:5vw"><a class="title-link" href="index.html">Handwriter</a></h1>
                      </div>
                        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
                        <div class="collapse navbar-collapse" id="navbarSupportedContent">
                            <ul class="navbar-nav ms-auto mt-2 mt-lg-0">
                                <li class="nav-item active"><a class="nav-link" href="index.html">Home</a></li>
                                <li class="nav-item"><a class="nav-link" href="methods.html">Methods</a></li>
                                <li class="nav-item"><a class="nav-link" href="howto.html">How To</a></li>
                                <li class="nav-item"><a class="nav-link" href="#!">Workflow Integration</a></li>
                                <li class="nav-item"><a class="nav-link" href="research.html">Research</a></li>
                                <!--
                                <li class="nav-item dropdown">
                                    <a class="nav-link dropdown-toggle" id="navbarDropdown" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Resources</a>
                                    <div class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                                        <a class="dropdown-item" href="#!">CSAFE</a>
                                        <a class="dropdown-item" href="#!">Github</a>
                                        <a class="dropdown-item" href="#!">Research</a>
                                    </div>
                                </li>
                              -->
                            </ul>
                        </div>
                    </div>

                </nav>
                <!-- Page content-->
                <div class = "container-fluid ">
                    <h1 style ="padding-top:20px">Integrating handwriter into a workflow </h1>
                    <br>
                    <h2>Interested in how to integrate handwriter into your own project?</h2>
                    <p> This page will give you a little more information on integration, as well as an example of how we used it </p>
                    <br>
                    <h2>Inputs & Outputs</h2>
                    <p> As an input, handwriter take a .png image of handwriting. This input needs to be taken through the core steps defined in the <a href="methods.html">methods</a> section.
                      As a result, handwriter outputs the information and measurements for each glyph as a list of lists. You will want to keep this in mind as you integrate handwriter into your
                      own workflow</p>
                    <br>
                    <h2> How we use it </h2>
                    <p> The handwriter package came about as apart of our larger process of attempting to automate the process of identifying handwriting from the same individiual in a closed set.
                      The package is one of 3 distinct parts of our workflow that are as follows:</p>
                    <ol>
                      <li style = "padding-top: 20px">Data Collection
                        <ul>
                          <li>Collect handwriting samples </li>
                          <li>Scan, load, and crop images via batch processing</li>
                        </ul>
                      </li>
                      <li style = "padding-top: 10px">Computational Tools</li>
                      <ul>
                        <li>Binarize: Turn image to black and white</li>
                        <li>Skeltonize: Reduce writing to 1 pixel wide</li>
                        <li>Break into glyphs: Decompose into managable pieces</li>
                        <li>Measure: Extract various measurements of these glyphs</li>
                      </ul>
                      <li style = "padding-top: 10px">Statistical analysis</li>
                      <ul>
                        <li>Clustering: Separate glyphs based on shape</li>
                        <li>Model: Fit a statistical model to the data</li>
                        <li>Identify: Identify a writer in a closed set</li>
                      </ul>
                    </ol>
                    <br>
                    <h3>Step 1: Data Collection</h3>
                    <p> We are conducting a large data collection study to gather handwriting samples
                      from a variety of participants across the world (most in the Midwest). Each participant
                      provides handwriting samples at three sessions. Session packets are prepared, mailed
                      to participants, completed, and mailed back. </p>
                    <p>
                      Once recieved, we scan all surveys and writing samples. Scans are loaded,
                      cropped, and saved using a Shiny app. The app also facilitates survey data entry,
                      saving that participant data to lines in an excel spreadsheet. </p>
                    <p> A public database of handwriting samples we have collected can be found at
                      <a href="https://forensicstats.org/handwritingdatabase/">forensicstats.org/handwritingdatabase</a>.</p>
                    <p> A data article regarding these samples was accepted at <a href="https://www.sciencedirect.com/science/article/pii/S2352340919314155?via%3Dihub"> Data in Brief </a><br>
                      Crawford, A., Ray, A., & Carriquiry, A. (2020). A database of handwriting samples for applications in forensic statistics. Data in brief, 28, 105059.</p>
                    <br>
                    <h3>Step 2: Computational Tools</h3>
                    <p> Information on computational tools can be found in the <a href="methods.html">methods</a> section. </p>
                    <br>
                    <h3>Step 3: Statistical Analysis</h3>
                    <h3> Clustering </h3>
                    <p> Rather than impose rigid grouping rules (the previously used ‘’adjacency grouping’’) we consider a more robust, dynamic K −
                      means type clustering method that is focused on major glyph structural components.</p>
                    <p>For a clustering algorithim we need two things: </p>
                    <ol>
                      <li> <b>A distance measure </b> - For us, a way to measure the discrepency between glyphs. </li>
                      <li> <b>A measure of center </b> - A glyph-like structure that is the exemplar representation of a group of glyphs. </li>
                    </ol>
                    <br>
                    <h2> Glyph Distance Measurement </h2>
                    <p> We begin by defining edge to edge distances. Edge to edge distances are subsequently combined for an overall glyph to glyph distance. </p>
                    <p> Consider the following single edge glyphs e1 and e2. Make 3 edits to e1 to match e2. Then combine the magnitude of each edit. </p>
                    <div class = "container-sm"?
                      <img src="Pictures/edge_to_edge_1.png" class="img-fluid" alt="edge_to_edge_1">
                    </div>
                    <p> Measure 1 (Left) - <b>Shift</b>: Anchor to the nearest endpoint by shifting. In our example, the shift value is 1.4.</p>
                    <p> Measure 2 (Center) - <b>Stretch</b>: Make the end points the same distance apart. Stretch value of 9.9.</p>
                    <p> Measure 3 (Right and Bottom) - <b>Shape</b>: Bend and twist the edge using 7 shape points. Shape points are 'matched' and the distance
                      between them is averaged to obtain the shape value. Shape value of 8.4 after averaging </p>
                    <div class = "container-sm">
                      <img src="Pictures/edge_to_edge_6.png" class="img-fluid" alt="edge_to_edge_6">
                    </div>
                    <center> <br>Shape measurements averaged <br></center>

                    <div class = "container-sm">
                      <img src="Pictures/edge_to_edge_5.png" class="img-fluid" alt="edge_to_edge_2">
                    </div>

                    <p> <br>So, our edge to edge distance: <b>D(e1, e2) = 1.4 + 9.9 + 8.4 = 19.7</b><br></p>

                    <h2><br>Measure of Glyph Centers </h2>
                    <p> For this measurement, we take the weighted average of endpoints, 7 shape points, and edge length</p>

                    <div class = "container-sm">
                      <img src="Pictures/measure_center_1.png" class="img-fluid" alt="measure_center_1">
                    </div>

                    <h2> <br>K-means clustering algorithim for glyphs </h2>
                    <p> We implement a standard K-means. We begin with a fixed K and set of exemplars. Iterate between the following steps until cluster assignments don't change: </p>
                    <p> <b>1. Assign each glyph to the exemplar it is nearest to given the distance measure taken before </b></p>
                    <p> <b>2. Calculate each cluster mean as defined. Find the exemplar nearest the cluster center. </b></p>

                    <div class = "container-sm">
                      <img src="Pictures/k_means_1.png" class="img-fluid" alt="k_means_1">
                    </div>

                    <p> <br>An example cluster when K = 40 is shown below. Examplar is shown on the left in red, with the members shown
                      as in black behind it. On the right is the cluster mean. </p>
                    <p> During clustering, outliers are considered glyphs that are a certain distance from the exemplar. The algorithim sets
                      a ceiling on the allowable number of clusters. </p>

                    <br>
                    <h4> Statistical Modeling </h4>
                    <p> The most appropriate approach to modeling is found through the wrapped model for rotational angles</p>
                    <br>
                    <h2> Wrapped Model for Rotation Angles </h2>
                    <p> We consider the rotational angles found in measurements before in the polar coordinate syste and treat them
                      as spanning the full circle. So we map the upper half plane values to (0, 2π), where the values above the x-axis
                      indicate a right leaning graph and below the x-axis indicate left leaning graphs. Graphs that are relatively straight
                      up and down will have values near 0/2π if they are wider than tall, and near π if they are taller than wide. </p>

                    <p> We consider two distributions to approach this circular data: </p>
                    <p> The <b> von Mises </b> distribution is a close approximate to the wrapped normal distribution,
                      circular analog of the normal distribution. This is the go-to model for unimodal wrapped distribution.
                      It is specified through the mean, μ, and concentration, κ (1/k analogous to σ<sup>2</sup>).</p>

                    <p>The <b> wrapped Cauchy</b> distribution is the wrapped version of the Cauchy distribution.
                      Similar to Cauchy, this distribution is symmetric, unimodel, and specified by a location paramter,
                      μ, and concetration parameter ρ. This is a heavily-tailed distribution in the sense that it will place
                      more density on the "back" of the circle opposite the peak of distribution. </p>
                    <p> Now consider: </p>

                    <div class = "container-sm">
                      <img src="Pictures/wrapped_cauchy_1.png" class="img-fluid" alt="wrapped_cauchy_1">
                    </div>
                    <p>Where RA<sub>w,k,i</sub>, i = 1,...,n<sub>w,k</sub>, are roation angles from cluster k, and writer w, on
                      the full circle (0, 2π). For a given writer and cluster, μ<sub>w,k</sub> and ϕ<sub>w,k</sub> are the location
                      and concentration parameters, respectivley. We place non-informative uniform priors on each. Again, there is no borrowing
                      set up in the model for rotation angles. Each writer/cluster combination ets its own estimated rotation angle distribution.</p>
                  </div>
            <!-- Footer -->
            <footer class = "bg-green foot">
              <a href = "https://www.iastate.edu/" target="_blank">
                <img src = "Pictures/isu-white.png" class = "foot-logo">
              </a>
              <a href = "https://forensicstats.org/" target="_blank">
                <img src = "Pictures/csafe-logo_white.png" class = "foot-logo">
              </a>
              <a href = "https://github.com/CSAFE-ISU/handwriter" target="_blank">
                <img src = "Pictures/GitHub-Mark-Light-64px.png" class = "foot-logo">
              </a>
              </div>
            </footer>
            </div>
        </div>
        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
    </body>
</html>
